!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var i in n)("object"==typeof exports?exports:t)[i]=n[i]}}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=3)}([function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(5),u=function(t){return t&&t.__esModule?t:{default:t}}(s),c=function(t){function e(t){return r(this,e),t=t||{},o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t))}return a(e,t),l(e,[{key:"draw",value:function(){}},{key:"__draw",value:function(t,e,n){this.ctx=t,n&&!this.parentNode&&this.ctx.setGlobalAlpha(1),t.save(),this.__translate(),this.__setOpacity(),this.__transform(),t.save(),this.__drawBackground(),this.__drawShadow(),this.__drawBorder(),this.draw(),t.restore(),this.drawChildren(e),e&&this.__drawDebugBoundary(),t.restore(),n&&!this.parentNode&&this.__drawDebugImage(n)}},{key:"__drawDebugImage",value:function(t){this.ctx.setGlobalAlpha(.4),this.ctx.drawImage(t)}},{key:"__drawBoundaryDetail",value:function(t,e,n){n+="";var i=this.ctx;i.setFontSize(10),i.setFillStyle("red"),i.fillText(n,(t-5*n.length)/2,(e-10)/2+10)}},{key:"__drawDebugBoundary",value:function(){var t="rgba(248, 225, 24, 0.6)",e="rgba(100, 255, 243, 0.6)",n=this.layout,i=n.width,r=n.height,o=this.ctx,a=this.style,l=a.borderTopWidth,s=a.borderBottomWidth,u=a.borderLeftWidth,c=a.borderRightWidth,h=a.marginTop,f=a.marginLeft,d=a.marginRight,y=a.marginBottom,p=a.paddingRight,g=a.paddingLeft,v=a.paddingTop,_=a.paddingBottom,w=a.margin,b=a.padding,m=a.borderWidth;h=h||w||0,f=f||w||0,d=d||w||0,y=y||w||0,p=p||b||0,g=g||b||0,v=v||b||0,_=_||b||0,c=c||m||0,u=u||m||0,l=l||m||0,s=s||m||0,o.save(),h&&(o.save(),o.setFillStyle(t),o.translate(0,-h),o.fillRect(0,0,i,h),this.__drawBoundaryDetail(i,h,h),o.restore()),f&&(o.save(),o.setFillStyle(t),o.translate(-f,0),o.fillRect(0,0,f,r),this.__drawBoundaryDetail(f,r,f),o.restore()),d&&(o.save(),o.setFillStyle(t),o.translate(i,0),o.fillRect(0,0,d,r),this.__drawBoundaryDetail(d,r,d),o.restore()),y&&(o.save(),o.setFillStyle(t),o.translate(0,r),o.fillRect(0,0,i,y),this.__drawBoundaryDetail(i,y,y),o.restore()),p&&(o.save(),o.translate(i-p-c,l),o.setFillStyle(e),o.fillRect(0,0,p,r-l-s),this.__drawBoundaryDetail(p,r-l-s,p),o.restore()),g&&(o.save(),o.translate(u,l),o.setFillStyle(e),o.fillRect(0,0,g,r-s-l),this.__drawBoundaryDetail(g,r-s-l,g),o.restore()),v&&(o.save(),o.translate(u,l),o.setFillStyle(e),o.fillRect(0,0,i-u-c,v),this.__drawBoundaryDetail(i-u-c,v,v),o.restore()),_&&(o.save(),o.translate(u,r-_-s),o.setFillStyle(e),o.fillRect(0,0,i-u-c,_),this.__drawBoundaryDetail(i-u-c,_,_),o.restore()),i&&r&&(o.setStrokeStyle("rgba(143, 143, 143, 1)"),o.strokeRect(0,0,i,r)),o.restore()}},{key:"__setOpacity",value:function(){var t=this.style.opacity;if(t&&!(t>1)){var e=this.getOpacity();e&&e<1&&(t*=e),this.ctx.setGlobalAlpha(t)}}},{key:"getOpacity",value:function(){for(var t=this.parentNode,e=1;t;)t.style.opacity&&(e=Math.min(t.style.opacity*e,1)),t=t.parentNode;return e}},{key:"getPos",value:function(){for(var t=0,e=0,n=this;n;)t+=n.layout.left||0,e+=n.layout.top||0,n=n.parentNode;return{left:t,top:e}}},{key:"__translate",value:function(){var t=this.layout,e=t.left,n=t.top;(e||n)&&this.ctx.translate(Math.round(e),Math.round(n))}},{key:"__transform",value:function(){var t=this.ctx,e=this.style,n=e.transformOrigin,i=e.rotate,r=e.scale,o=this.layout,a=o.width,l=o.height;(i||r)&&(n&&n.length||(n=[a/2,l/2]),t.translate(n[0],n[1]),null!=i&&t.rotate(i*Math.PI/180),null!=r&&(r.constructor===Array?t.scale(r[0],r[1]):t.scale(r,r)),t.translate(-n[0],-n[1]))}},{key:"__drawBackground",value:function(){var t=this.ctx,e=this.style.backgroundColor,n=this.layout,i=n.width,r=n.height;e&&(t.save(),t.setFillStyle(e),t.fillRect(0,0,i,r),t.restore())}},{key:"__drawShadow",value:function(){var t=this.ctx,e=this.style.boxShadow,n=this.layout,r=n.width,o=n.height;e&&(t.save(),t.setShadow.apply(t,i(e)),t.setFillStyle("#FFF"),t.fillRect(0,0,r,o),t.restore())}},{key:"__setBorderRadiusContext",value:function(t,e,n,i,r,o){var a=r/2;t.beginPath(),t[o](e-i-a,a),t.arc(e-i-a,i+a,i,-Math.PI/2,0),t[o](e-a,n-i-a),t.arc(e-i-a,n-i-a,i,0,Math.PI/2),t[o](i+a,n-a),t.arc(i+a,n-i-a,i,Math.PI/2,Math.PI),t[o](a,i+a),t.arc(i+a,i+a,i,-Math.PI,-Math.PI/2),t[o](e-i-a,a)}},{key:"__drawBorderRadius",value:function(t,e,n,i,r,o){this.__setBorderRadiusContext(t,e,n,i,r,o),t.stroke()}},{key:"__drawSingleBorder",value:function(t,e,n,i,r){for(var o=(this.style.borderWidth,this.ctx),a=4*r,l=void 0,s=void 0,u=Math.floor((e===i?n-t:i-e)/a)/2,c=0;c<u;c++)l=2*c*a,s=(2*c+1)*a,e===i?(o.moveTo(t+l,e),o.lineTo(t+s,e)):t===n&&(o.moveTo(t,e+l),o.lineTo(t,e+s))}},{key:"__drawBorder",value:function(){var t=this.style,e=t.borderLeftWidth,n=t.borderBottomWidth,i=t.borderRightWidth,r=t.borderTopWidth,o=t.borderWidth,a=t.borderColor,l=void 0===a?"black":a,s=t.borderStyle,u=void 0===s?"solid":s,c=t.borderRadius,h=void 0===c?0:c,f=this.layout,d=f.width,y=f.height,p=this.ctx;if(o||n||r||e||i){if(p.save(),p.setStrokeStyle(l),o)return p.setLineWidth(o),h&&this.__drawBorderRadius(p,d,y,h,o,"dashed"===u?"moveTo":"lineTo"),"solid"!==u||h?"dashed"===u&&(p.beginPath(),this.__drawSingleBorder(h,o/2,d-h,o/2,o),this.__drawSingleBorder(o/2,h,o/2,y-h,o),this.__drawSingleBorder(d-o/2,h,d-o/2,y-h,o),this.__drawSingleBorder(h,y-o/2,d-h,y-o/2,o),p.closePath(),p.stroke()):p.strokeRect(o/2,o/2,d-o,y-o),void p.restore();p.beginPath(),n&&(p.setLineWidth(n),"solid"===u?(p.moveTo(0,y-n/2),p.lineTo(d,y-n/2)):"dashed"===u&&this.__drawSingleBorder(0,y-n/2,d,y-n/2,n)),e&&(p.setLineWidth(e),"solid"===u?(p.moveTo(e/2,0),p.lineTo(e/2,y)):"dashed"===u&&this.__drawSingleBorder(e/2,0,e/2,y,e)),i&&(p.setLineWidth(i),"solid"===u?(p.moveTo(d-i/2,0),p.lineTo(d-i/2,y)):"dashed"===u&&this.__drawSingleBorder(d-i/2,0,d-i/2,y,i)),r&&(p.setLineWidth(r),"solid"===u?(p.moveTo(0,r/2),p.lineTo(d,r/2)):"dashed"===u&&this.__drawSingleBorder(0,r/2,d,r/2,r)),p.closePath(),p.stroke(),p.restore()}}},{key:"drawChildren",value:function(t){var e=this;this.children.forEach(function(n){n.parentNode=e,n.__draw(e.ctx,t)})}},{key:"isInnerPoint",value:function(t,e){var n=this.getPos(),i=this.layout,r=i.width,o=i.height,a=n.left,l=n.top;return t>=a&&t<=a+r&&e>=l&&e<=l+o}},{key:"outputElementStyleInfo",value:function(){var t=this,e=(t.attr,t.attr.class,t.attr.__classObj,t.attr.style,{element:"color:#239a3b;font-size:20px;",className:"color:#0366d6;font-size:16px",common:"color:#000",attrName:"color:#f00"});console.clear(),console.log("%c<"+t.constructor.name+">",e.element),t.attr.class&&console.log("%c-class %c"+t.attr.class,e.className,e.common);var n=this.formatOutputInfo(JSON.stringify(t.style,null,2),e),r=this.formatOutputInfo(JSON.stringify(t.layout,null,2),e);console.log.apply(null,["%c-style %c"+n.output,e.className,e.common].concat(i(n.styles))),console.log.apply(null,["%c-layout %c"+r.output,e.className,e.common].concat(i(r.styles)))}},{key:"formatOutputInfo",value:function(t,e){var n=[];return t=t.replace(/"(.+)"\:\s(.+?)/g,function(t,i,r){return n.push(e.attrName),n.push(e.common),"%c"+i+"%c: "+r}),{output:t,styles:n}}}]),e}(u.default);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={processStyle:function(t,e){var n=this,i=t.attr.class||"";t.attr.style;return i.split(" ").forEach(function(i){n.calculateClassObj(t,i,e)}),t.style=Object.assign(t.style,t.attr.__classObj,t.attr.style),t.children.forEach(function(i){i.parentNode=t,n.processStyle(i,e)}),t},calculateClassObj:function(t,e,n){var i=this;t.attr.__classObj||(t.attr.__classObj={});for(var r in n)!function(r){var o=r.split(","),a=n[r];o.length>1?o.forEach(function(n){n=n.trim(),i.calculateSingleClassObj(t,e,n,a)}):i.calculateSingleClassObj(t,e,r,a)}(r)},calculateSingleClassObj:function(t,e,n,i){if(/\:first-child/.test(n)){if(n.indexOf(e)<0||!t.isFirstChild())return}else if(/\:last-child/.test(n)){if(n.indexOf(e)<0||!t.isLastChild())return}else if(e!==n)return;Object.assign(t.attr.__classObj,i)},processDynamicClassObj:function(t){return t=Object.assign({},t,{"__dynamic-height-container":{flexDirection:"column",flexShrink:0}}),t.root=Object.assign({},t.root,{alignItems:"stretch",justifyContent:"flex-start",flexDirection:"column"}),t}}},function(t,e,n){"use strict";function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var s,u=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=n(0),h=function(t){return t&&t.__esModule?t:{default:t}}(c),f=(s={a:[.5294,.5294],b:[.6078,.5882],c:[.549,.5294],d:[.6078,.5882],e:[.549,.5294],f:[.3529,.3529],g:[.5882,.5882],h:[.5882,.5294],i:[.2353,.2353],j:[.2353,.2353],k:[.5294,.5294],l:[.2353,.2353],m:[.8627,.8824],n:[.5686,.5294],o:[.5686,.5882],p:[.5882,.5882],q:[.5882,.5882],r:[.3725,.3529],s:[.5098,.5294],t:[.3529,.3529],u:[.5686,.5294],v:[.5294,.4706],w:[.7647,.7647],x:[.5098,.4706],y:[.5294,.4706],z:[.5294,.4706],A:[.6667,.6471],B:[.6471,.6471],C:[.7059,.6471],D:[.7059,.6471],E:[.5882,.5882],F:[.5686,.5294],G:[.7255,.7059],H:[.7255,.7059],I:[.2549,.2941],J:[.5294,.5294],K:[.6471,.6471],L:[.549,.5294],M:[.8627,.8824],N:[.7255,.7059],O:[.7647,.7059],P:[.6275,.6471],Q:[.7647,.7059],R:[.6471,.5882],S:[.6275,.5882],T:[.6275,.5882],U:[.7255,.6471],V:[.6667,.6471],W:[.9608,.8824],X:[.6667,.6471],Y:[.6471,.5882],Z:[.6471,.5882],0:[.6032,.5712],1:[.3932,.5642],2:[.6032,.5712],3:[.6032,.5712],4:[.6032,.5712],5:[.6032,.5712],6:[.6032,.5712],7:[.541,.5712],8:[.6032,.5712],9:[.6032,.5712],"~":[.5686,.7059],"!":[.2941,.2352],"@":[.902,.8823],"#":[.6275,.6471],$:[.6275,.5882],"%":[.7647,.7059],"^":[.4706,.4118],"&":[.7059,.6471],"*":[.4902,.4118],"(":[.3529,.3529],")":[.3529,.3529],"（":[1.0196,1],"）":[1.0196,1],"-":[.612,.2941],_:[.4314,.4706],"+":[.6275,.5882],"=":[.6275,.5294],"[":[.3529,.2941],"]":[.3529,.2941],"{":[.3922,.3529],"}":[.3922,.3529],"|":[.3137,.2352],"/":[.3333,.4118],"\\":[.3333,.4118],"<":[.6275,.5294],">":[.6275,.5294]},l(s,"*",[.4902,.4118]),l(s,";",[.2941,.2352]),l(s,":",[.2745,.2352]),l(s,"'",[.2353,.1765]),l(s,'"',[.4314,.2941]),l(s,"‘",[.3725,.1765]),l(s,"“",[.5686,.3529]),l(s,"”",[.5686,.3529]),l(s,",",[.2941,.1765]),l(s,".",[.2745,.2353]),l(s,"?",[.5686,.4706]),l(s,"。",[1.02,1]),l(s,"~",[.5686,.7059]),l(s," ",[.2745,.2352]),s),d=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));n.style;return n}return a(e,t),u(e,[{key:"getFontSize",value:function(){return this.style.fontSize||this.getParentProp("fontSize")||14}},{key:"getLineHeight",value:function(){return this.style.lineHeight||this.getParentProp("lineHeight")||this.getFontSize()+2}},{key:"getTextShadow",value:function(){return this.style.textShadow||this.getParentProp("textShadow")}},{key:"getTextAlign",value:function(){return this.style.textAlign||this.getParentProp("textAlign")}},{key:"getColor",value:function(){return this.style.color||this.getParentProp("color")||"black"}},{key:"measureText",value:function(t){t=null!=t?t+"":null!=this.attr.content?this.attr.content+"":"";for(var n=this.getFontSize(),i=0,r=0;r<t.length;r++){var o=t[r];if(/[A-Za-z0-9]/.test(o)||"~!@#$%^&*()（）-_+=[]{}|/<>*;:'\"‘“”,.?。 ".indexOf(o)>-1){i+=f[o][e.systemInfo&&"android"===e.systemInfo.platform?1:0]*n}else/[^\x00-\xff]/.test(o)?i+=n:i+=n/2}return Math.round(i)}},{key:"exceedWidth",value:function(t,e){return this.measureText(t)>e}},{key:"getTextStartPos",value:function(){var t=this.style,e=t.paddingLeft,n=t.borderLeftWidth,i=t.paddingTop,r=t.borderTopWidth;return{left:(e||0)+(n||0),top:(i||0)+(r||0)}}},{key:"draw",value:function(){var t=(this.layout.contentWidth,this.style),e=t.textOverflow,n=t.lineClamp,i=void 0===n?1:n,r=void 0;r=this.layout.contentWidth;var o=null!=this.attr.content?this.attr.content+"":"",a="",l=0,s=this.getLineHeight(),u=this.getTextStartPos();if(this.ctx.translate(u.left,u.top),this.exceedWidth(o,r)){for(var c=0;c<o.length;c++)if(a+=o[c],this.exceedWidth(a,r)){if("ellipsis"===e&&i-1===parseInt(l/s))return void this.drawText(a.slice(0,a.length>1?a.length-1:1)+"...",r,l);this.drawText(a.slice(0,a.length>1?a.length-1:1),r,l),a.length>1&&c--,a="",l+=s}a&&this.drawText(a,r,l)}else this.drawText(o,r)}},{key:"getParentProp",value:function(t){for(var e=this.parentNode,n=void 0;e;){if(n=e.style[t])return n;e=e.parentNode}}},{key:"drawText",value:function(t,e,n){var r=this.layout,o=(r.left,r.top,r.width,r.height,this.getTextAlign()),a=this.getFontSize(),l=this.getTextShadow(),s=this.getColor(),u=this.ctx,c=void 0;n=n||0,s&&u.setFillStyle(s),o&&u.setTextAlign(o),a&&u.setFontSize(a),l&&u.setShadow.apply(u,i(l)),o&&e?("center"===o?c=e/2:"left"===o?c=0:"right"===o&&(c=e),u.fillText(t,c,a+n)):u.fillText(t,0,a+n)}}]),e}(h.default);e.default=d},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var r=n(4),o=i(r),a=n(1),l=i(a),s=n(0),u=i(s),c=n(2),h=i(c),f=n(6),d=i(f),y=n(7),p=i(y),g=n(10),v=i(g),_=n(13),w=i(_),b=void 0,m=void 0,x={useDynamicHeight:!1},S={useDynamicHeight:["6.5.16","6.5.14"],makePhoneCall:["6.5.16","6.5.14"]},O=void 0,T=void 0,M=0;t.exports={init:function(t){this.windowWidth=t.windowWidth||200,this.windowHeight=t.windowHeight||200,this.ctx=t.ctx,this.render=t.render,this.classObj=t.classObj,this.layoutDebug=t.layoutDebug,this.imageDebug=t.imageDebug,this.minFontSize=t.minFontSize||10,this.scaleRatio=this.windowWidth/384,this.disablePolling=t.disablePolling,this.maxPollingCount=t.maxPollingCount||20},measureText:function(t,e){return new h.default({attr:{content:t},style:{fontSize:e}}).measureText()},draw:function(){var t=this,e=(this.ctx,this.tpl,this.classObj),n=this.data,i=void 0;this.getSystemInfo(function(r){h.default.systemInfo=r;var a=t.render(n,{View:u.default,Image:d.default,Text:h.default,Navigator:p.default,Location:v.default,LineChart:w.default});if(x.useDynamicHeight&&(a=t.processDynamicHeightTree(a),e=l.default.processDynamicClassObj(e)),t.__setContainerSize(a),a=l.default.processStyle(a,e),t.scaleSize(a),(0,o.default)(a),clearTimeout(b),M=0,t.root=a,x.useDynamicHeight&&t.root.children[0])return i=t.root.layout.height=t.root.children[0].layout.height,void t.setDynamicHeight(i,function(e){t.__draw()});t.__draw(a)})},__draw:function(){var t=this;this.root.__draw(this.ctx,this.layoutDebug,this.imageDebug),this.layoutDebug&&this.drawDebugMask(),this.ctx.draw(),!this.disablePolling&&M<this.maxPollingCount&&(b=setTimeout(function(){t.__draw(),M++},500))},drawDebugMask:function(){if(m){var t=m.getPos();this.ctx.setFillStyle("rgba(252, 156, 225, 0.5)"),this.ctx.fillRect(t.left,t.top,m.layout.width,m.layout.height)}},setDynamicHeight:function(t,e){console.log("dynamicHeight:"+t),wx.setWidgetSize?wx.setWidgetSize({height:t,success:function(t){e&&e(t.errCode)},fail:function(t){e&&e(t.errCode)}}):e&&e()},processDynamicHeightTree:function(t){var e=new u.default({attr:{class:"__dynamic-height-container"},parentNode:t,children:t.children});return e.children.forEach(function(t){t.parentNode=e}),t.children=[e],t},scaleSize:function(t){var e=this,n=this.scaleRatio;["width","height","left","top","right","bottom","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","borderWidth","borderTopWidth","borderBottomWidth","borderLeftWidth","borderRightWidth","fontSize","lineHeight"].forEach(function(i){null!=t.style[i]&&(t.style[i]="fontSize"===i?Math.max(e.minFontSize,Math.round(n*t.style[i])):Math.round(n*t.style[i]))}),t.children.forEach(function(t){e.scaleSize(t)})},handleTap:function(t){var e=this.layoutDebug,n=t.x,i=t.y,r=this.root,o=[],a=void 0,l=!1;if(r)if(this.detectTap(r,n,i,o),e&&o[0])a=o[o.length-1],a.outputElementStyleInfo(),m=a,l=!0;else for(;o.length;){a=o.pop();var s={x:n,y:i,target:a};if("function"==typeof a.attr.bindtap&&(a.attr.bindtap(s),l=!0),"function"==typeof a.attr.catchtap){a.attr.catchtap(s),l=!0;break}}return l},detectTap:function(t,e,n,i){if(t.isInnerPoint(e,n)){i.push(t);for(var r=0;r<t.children.length;r++){var o=t.children[r];this.detectTap(o,e,n,i)}}},__setContainerSize:function(t){t.attr.class="root",t.style.width=384,t.style.height=Math.floor(384*this.windowHeight/this.windowWidth),t.style.fontSize=14},setRender:function(t){this.render=t},setData:function(t){this.data=Object.assign(this.data||{},t),this.draw()},setClassObj:function(t){this.classObj=t},getSystemInfo:function(t){T?setTimeout(function(){t&&t(T)},0):O?O.push(t):(O=[t],wx.getSystemInfo({success:function(t){T=t,O.forEach(function(e){e(t)}),O=[]}}))},useDynamicHeight:function(){x.useDynamicHeight=!0},compareVersion:function(t,e){if(!t&&!e)return 0;if(!t)return-1;if(!e)return 1;t=t.split("."),e=e.split(".");for(var n=0;n<t.length;n++){var i=Number(t[n]||0),r=Number(e[n]||0);if(i>r)return 1;if(i<r)return-1}return 0},canIUse:function(t,e){var n=this;if(!S[t])return void(e&&e(!1));this.getSystemInfo(function(i){"ios"===i.platform&&n.compareVersion(i.version,S[t][0])>=0||"android"===i.platform&&n.compareVersion(i.version,S[t][1])>=0?e&&e(!0):e&&e(!1)})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={flexDirection:"row",padding:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,margin:0,marginLeft:0,marginRight:0,marginTop:0,marginBottom:0,borderWidth:0,borderLeftWidth:0,borderRightWidth:0,borderTopWidth:0,borderBottomWidth:0,position:"relative",flexGrow:null,flexShrink:1,flexWrap:"nowrap",justifyContent:"flex-start",alignItems:"stretch",alignContent:"stretch",alignSelf:null,left:null,right:null,top:null,bottom:null,width:null,height:null},r={row:"width",column:"height"},o={row:"left",column:"top"},a={row:"right",column:"bottom"},l=function(){return{left:0,top:0,width:0,height:0}},s=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},u=function(t,e,n){return e?!n&&t._calculateStyle&&null!=t._calculateStyle[e]?t._calculateStyle[e]:t.style&&null!=t.style[e]?t.style[e]:i[e]:t.style},c=function(t,e){return e in t.style},h=function(t,e){var n="padding"+s(e),i=c(t,n),r=c(t,"padding");return i?u(t,n):r?u(t,"padding"):0},f=function(t,e){var n="margin"+s(e),i=c(t,n),r=c(t,"margin");return i?u(t,n):r?u(t,"margin"):0},d=function(t,e){var n="border"+s(e)+"Width",i=c(t,n),r=c(t,"borderWidth");return i?u(t,n):r?u(t,"borderWidth"):0},y=function(t,e){return(u(t,o[e])||0)-(u(t,a[e])||0)},p=function(t,e){var n=u(t,r[e]),i=h(t,o[e])+h(t,a[e]);return Math.max(n,i)},g=function(t,e){return f(t,o[e])+(y(t,e)||0-y(t,e)||0)},v=function(t,e){var n=t.layout[r[e]];return Math.max(0,(n||0)-h(t,o[e])-h(t,a[e])-d(t,o[e])-d(t,a[e]))},_=function(t,e){return u(t,r[e])+f(t,o[e])+f(t,a[e])},w=function(t){for(var e=0,n=0;n<t.length;n++)e+=Number(u(t[n],"flexGrow"));return e},b=function(t,e,n){for(var i=e/w(t),o=0;o<t.length;o++){var a=Number(u(t[o],"flexGrow")),l=i<=0?0:a*i;t[o].layout[r[n]]=t[o]._calculateStyle[r[n]]=l}},m=function(t,e,n,i,l,s){var u=0,c=void 0,h=t.concat(e).sort(function(t,e){return t._columnIndex-e._columnIndex}),d=0===t.length||l<0,p=void 0;d&&"flex-start"!==n?"flex-end"===n?u=l:"center"===n?u=l/2:"space-around"===n&&(l<0&&(u=l/2),p=Math.max(0,l)/(2*h.length)):u=0;for(var g=0;g<h.length;g++)c=h[g],d&&("space-between"===n?u+=0===c._columnIndex?0:Math.max(0,l)/(h.length-1):"space-around"===n&&(u+=0===c._columnIndex?p:2*p)),u+=f(c,o[i]),c.layout[o[i]]=s+u+y(c,i),u+=c.layout[r[i]]+f(c,a[i]);return u},x=function(t,e){return u(t,"alignSelf")||u(e,"alignItems")},S=function(t){return"absolute"===u(t,"position")},O=function(t,e,n,i,l,s){var c=(u(l,"alignItems"),u(l,"alignContent")),h=n.length>=2?n.reduce(function(t,e){return t+e}):1===n.length?n[0]:0,d=i-h;n.length>1?"stretch"===c&&(n=n.map(function(t){return Math.max(0,d)/n.length+t})):n=[i];for(var p=0;p<e.length;p++){var g=e[p],v=u(g,r[t],!0),w=x(g,l),b=0,m=0,S=0;g.layout[r[t]]="stretch"===w&&null==v?n[g._lineIndex]-f(g,o[t])-f(g,a[t]):u(g,r[t]),"flex-start"===w||"stretch"===w?b=f(g,o[t]):"flex-end"===w?b=n[g._lineIndex]-g.layout[r[t]]-f(g,a[t]):"center"===w&&(b=(n[g._lineIndex]-_(g,t))/2+f(g,o[t])),n.length>1&&("flex-start"===c||"stretch"===c?m=0:"flex-end"===c?m=i-h:"space-between"===c?m=Math.max(0,d)/(n.length-1)*g._lineIndex:"space-around"===c&&(m=d<0?d/2:d/(2*n.length)*(2*g._lineIndex+1))),S=g._lineIndex>=2?n.slice(0,g._lineIndex).reduce(function(t,e){return t+e}):n[g._lineIndex-1]||0,g.layout[o[t]]=s+m+b+S+y(g,t),C(g)}},T=function(t,e,n,i){var l=i-n,s=0,c=0,h=[],d=[];return t.forEach(function(t,n){d[n]=Math.max(0,u(t,"flexShrink")),h[n]=p(t,e)*d[n],c+=h[n]}),t.forEach(function(t,n){var i=f(t,o[e])+f(t,a[e]);h[n]>0&&(t.layout[r[e]]=Math.max(0,t.layout[r[e]]-h[n]/c*l)),s+=t.layout[r[e]]+i}),s},M=function t(e,n,i){e.style=e.style||{},e.children=e.children||[],e._calculateStyle=e._calculateStyle||{};var r=u(e,"flexDirection"),o=e.children.filter(function(t){return!S(t)});n-=P(e,"row");var a=u(e,"width"),l=0;return null==a?e.measureText?(D(e,n),i?e._calculateStyle.width+f(e,"left")+f(e,"right"):e._calculateStyle.width):("row"===r?o.forEach(function(e){var i=t(e,n-l-f(e,"left")-f(e,"right"),!0);l+=i}):o.forEach(function(e){var i=t(e,n,!0);i>l&&(l=i)}),i?l+P(e,"row")+f(e,"left")+f(e,"right"):l+P(e,"row")):i?_(e,"row"):a},j=function t(e,n,i,r){e.style=e.style||{},e.children=e.children||[],e._calculateStyle=e._calculateStyle||{};var o=u(e,"flexDirection"),a=e.children.filter(function(t){return!S(t)});i-=P(e,"column"),u(e,"width")?n=u(e,"width")-P(e,"row"):n-=P(e,"row");var l=u(e,"height"),s=0;return null==l?e.measureText?(D(e,n),r?e._calculateStyle.height+f(e,"top")+f(e,"bottom"):e._calculateStyle.height):("column"===o?a.forEach(function(e){s+=t(e,n,i,!0)}):a.forEach(function(e){var r=t(e,n,i,!0);r>s&&(s=r)}),r?s+P(e,"column")+f(e,"top")+f(e,"bottom"):s+P(e,"column")):r?_(e,"column"):l},P=function(t,e){return h(t,o[e])+h(t,a[e])+d(t,o[e])+d(t,a[e])},k=function(t){t.style=t.style||{},t.layout=t.layout||l();var e=u(t,"flexDirection"),n="row"===e?"column":"row",i=p(t,e),a=p(t,n);g(t,e);"relative"===u(t,"position")&&(t.layout[r[e]]=i,t.layout[r[n]]=a,t.layout[o[e]]+=g(t,e),t.layout[o[n]]+=g(t,n)),C(t)},D=function(t,e){t.style=t.style||{},t.layout=t.layout||l(),t._calculateStyle={};var n=void 0,i=void 0,r=void 0,o=void 0,a=void 0;o=t.measureText()+P(t,"row"),null==u(t,"width")?(r=Math.ceil(o/e),n=o>e?e:o):(n=u(t,"width"),r=Math.ceil(o/n)),"ellipsis"===u(t,"textOverflow")&&(a=u(t,"lineClamp")||1,r=Math.min(r,a)),i=null==u(t,"height")?t.getLineHeight()*r+P(t,"column"):u(t,"height"),t._calculateStyle.width=n,t._calculateStyle.height=i},C=function t(e){var n=e.children||[],i=void 0,s=void 0,c=u(e,"flexDirection"),y="row"===c?"column":"row",p=v(e,c),g=v(e,y);if(e.layout.contentWidth="row"===c?p:g,e.layout.contentHeight="row"===c?g:p,n.length){var w=(u(e,"flexDirection"),u(e,"flexWrap")),x=u(e,"justifyContent"),P=(u(e,"width"),u(e,"height")),k=[],C=[],I=0,W=0,L=0,B=[],N=0,A=void 0,E=h(e,o[c])+d(e,o[c]),R=h(e,o[y])+d(e,o[y]),z=void 0;i=n.filter(function(t){return!S(t)});for(var F=0;F<i.length;F++){var H=i[F];H.style=H.style||{},H.layout=H.layout||l(),H._calculateStyle={};var G=u(H,"flexGrow");u(H,"position");H._columnIndex=L,H._lineIndex=W,0===L&&(N=0,I=0,k=[],C=[]);var V=u(H,r[c]),J=u(H,r[y]),U=f(H,"left")+f(H,"right");if(null==V&&null==G&&("row"===c?H._calculateStyle.width=M(H,e.layout.contentWidth-I-U):H._calculateStyle.height=j(H,e.layout.contentWidth,e.layout.contentHeight)),null==J&&("row"===c?H._calculateStyle.height=j(H,e.layout.contentWidth-I-U,e.layout.contentHeight):H._calculateStyle.width=M(H,e.layout.contentWidth)),H.measureText&&("row"===c?D(H,e.layout.contentWidth-I-U):D(H,e.layout.contentWidth)),z=null!=G?f(H,o[c])+f(H,a[c]):_(H,c),A=I+z>p,"wrap"===w&&A&&L>0)b(k,p-I,c),B[W]=N,m(k,C,x,c,p-I,E),W+=1,L=0,F--;else{if(_(H,y)>N&&(N=_(H,y)),null!=G)k.push(H);else{var X=u(H,r[c]);null!=X&&(H.layout[r[c]]=X),C.push(H)}if(I+=z,F===i.length-1||"wrap"===w&&A&&0===L){var Y=void 0;b(k,p-I,c),A&&(Y=T(C,c,p,I)),B[W]=N,m(k,C,x,c,null==Y?p-I:p-Y,E),L=0}L+=1}}O(y,i,B,g,e,R),s=n.filter(function(t){return S(t)});for(var Z=0;Z<s.length;Z++){var $=s[Z];$.style=$.style||{},$.layout=$.layout||l();var q=u($,"left"),K=u($,"top"),Q=u($,"right"),tt=u($,"bottom"),et="main"===c?p:g,nt="main"===c?g:p,it=u($,"height"),rt=u($,"width"),ot=void 0,at=void 0;$.layout.width=null!=q&&null!=Q?et-q-Q:null!=rt?rt:M($,1e4,!0),$.layout.height=null!=K&&null!=tt?nt-K-tt:null!=it?it:j($,$.layout.width,e.layout.contentHeight,!0),null!=q?ot=f($,"left")+q:null!=Q&&(ot=et-f($,"right")-$.layout.width-Q),null!=K?at=f($,"top")+d($,"top")+K:null!=tt&&(at=P-f($,"bottom")-$.layout.height-tt),$.layout.left=ot||0,$.layout.top=at||0,t($)}}};e.default=k},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(){function t(e){i(this,t),e=e||{},this.attr=e.attr||{},this.style=e.style||{},this.nextSibling=e.nextSibling,this.previousSbling=e.previousSbling,this.parentNode=e.parentNode,this.children=e.children||[]}return o(t,[{key:"insertBefore",value:function(t,e){for(var n=e.parentNode?e.parentNode.children:root.children,i=0;i<n.length;i++)if(n[i]===e)return e===t?n[i]=t:n.splice(i,0,t),void(t.parentNode=this)}},{key:"isFirstChild",value:function(){return 0===this.getIndexInParent()}},{key:"isLastChild",value:function(){var t=this.parentNode;return!t||this.getIndexInParent()===t.children.length-1}},{key:"getIndexInParent",value:function(){return this.parentNode?this.parentNode.children.indexOf(this):0}},{key:"remove",value:function(){var t=this.parentNode?this.parentNode.children:root.children,e=t.indexOf(this);t.splice(e,1),this.parentNode=null}},{key:"__resetParentNode",value:function(t){var e=this;t.children=t.children||[],t.children.forEach(function(n){n.parentNode=t,e.__resetParentNode(n)})}},{key:"__deepClone",value:function(e){var n=void 0;n=e instanceof t?new e.constructor(e):new e.constructor;for(var i in e)"parentNode"!==i&&"nextSibling"!==i&&"previousSbling"!==i&&(n[i]="object"===r(e[i])?this.__deepClone(e[i]):e[i]);return n}},{key:"cloneNode",value:function(e){if(e){var n=this.__deepClone(this);return this.__resetParentNode(n),n.__proto__=this.__proto__,n}return new t(this)}},{key:"toString",value:function(){var t=this.constructor.name.toLocaleLowerCase(),e=this.children.map(function(t){return t.toString()}),n=[];for(var i in this.attr)null!=this.attr[i]&&"content"!==i&&n.push(" "+i+'="'+this.attr[i]+'"');return"<"+t+n.join("")+">"+(e.length?e.join(""):null!=this.attr.content?this.attr.content:"")+"</"+t+">"}}]),t}();e.default=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=n(0),s=function(t){return t&&t.__esModule?t:{default:t}}(l),u=function(t){function e(t){i(this,e);var n=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.attr.src=t.attr.src,n}return o(e,t),a(e,[{key:"draw",value:function(){var t=this.ctx;this.attr.src&&t.drawImage(this.attr.src,0,0,this.layout.width,this.layout.height)}}]),e}(s.default);e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=n(2),s=i(l),u=n(0),c=i(u),h=n(1),f=i(h),d=n(8),y=i(d),p=n(9),g=i(p),v={__onNavigatorTap:function(t){var e=t.target.attr,n=e.navigatorType,i=e.url;console.log("url:"+i);var r=void 0;"location"===n?wx.authorize&&wx.authorize({scope:"scope.userLocation"}):i&&(r=i.match(/^tel\:(.*)/),r&&wx.makePhoneCall?wx.makePhoneCall({phoneNumber:r[1]}):wx.openApp&&wx.openApp({url:i}))}},_=function(t){function e(t){var n;r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),a=(0,y.default)(Object.assign(v,i.attr),{View:c.default,Text:s.default});return f.default.processStyle(a,g.default),n=a,o(i,n)}return a(e,t),e}(c.default);e.default=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t.filter(function(t){return null!=t})};e.default=function(t,e){var n=e.View,r=e.Text;e.Image,e.Navigator,e.Location;return Object.assign(t,{}),new n({style:{},attr:{},children:i([new r({style:{},attr:{class:"wx_navigator",bindtap:t.__onNavigatorTap,url:t.url,content:t.content},children:i([])})])})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={wx_navigator:{color:"#509FC9"}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=n(2),s=i(l),u=n(0),c=i(u),h=n(1),f=i(h),d=n(11),y=i(d),p=n(12),g=i(p),v={__onLocationTap:function(){return!0},__onLocationBtnTap:function(t){wx.authorize&&wx.authorize({scope:"scope.userLocation"})}},_=function(t){function e(t){var n;r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),a=(0,y.default)(Object.assign(v,i.attr),{View:c.default,Text:s.default});return f.default.processStyle(a,g.default),n=a,o(i,n)}return a(e,t),e}(c.default);e.default=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t.filter(function(t){return null!=t})};e.default=function(t,e){var n=e.View,r=e.Text;e.Image,e.Navigator,e.Location;return Object.assign(t,{}),new n({style:{},attr:{},children:i([new n({style:{},attr:{class:"wx_location",bindtap:t.__onLocationTap},children:i([new r({style:{},attr:{class:"wx_location_tip",content:"无法获取位置信息"},children:i([])}),new r({style:{},attr:{class:"wx_location_btn",bindtap:t.__onLocationBtnTap,content:"点击获取"},children:i([])})])})])})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={wx_location:{flexDirection:"column",alignItems:"center",width:384},wx_location_tip:{marginTop:42,color:"#888888",fontSize:16},wx_location_btn:{color:"#1AAD19",paddingTop:8,paddingBottom:8,width:130,textAlign:"center",marginTop:30,marginBottom:48,borderWidth:1,borderColor:"#1AAD19",borderRadius:6}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=n(2),u=(i(s),n(0)),c=i(u),h=n(1),f=(i(h),n(14)),d=(i(f),n(15)),y=(i(d),n(16)),p=i(y),g=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.style.width=410,n.style.height=160,n}return a(e,t),l(e,[{key:"draw",value:function(){this.style;var t=this.style,e=t.width,n=t.height,i=this.attr,r=i.xnum,o=i.ynum,a=i.hot;new p.default.Trend({ctx:this.ctx,width:e,height:n,xnum:r,ynum:o,hot:a}).setSeries([{name:"",data:this.attr.data}],n)}}]),e}(c.default);e.default=g},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){return t.filter(function(t){return null!=t})};e.default=function(t,e){var n=e.View;e.Text,e.Image,e.Navigator,e.Location;return Object.assign(t,{}),new n({style:{},attr:{},children:i([new n({style:{},attr:{class:"wx_line_chart"},children:i([])})])})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={wx_line_chart:{}}},function(t,e,n){"use strict";function i(t,e,n,i){if(n&&i||(n=.15,i=.15),e<1)var r=t[0].x+(t[1].x-t[0].x)*n,o=t[0].y+(t[1].y-t[0].y)*n;else var r=t[e].x+(t[e+1].x-t[e-1].x)*n,o=t[e].y+(t[e+1].y-t[e-1].y)*n;if(e>t.length-3)var a=t.length-1,l=t[a].x-(t[a].x-t[a-1].x)*i,s=t[a].y-(t[a].y-t[a-1].y)*i;else var l=t[e+1].x-(t[e+2].x-t[e].x)*i,s=t[e+1].y-(t[e+2].y-t[e].y)*i;return{pA:{x:r,y:o},pB:{x:l,y:s}}}var r=function(){};r.prototype.init=function(){return this},r.prototype.setData=function(){return this},r.prototype.formatData=function(){return this},r.prototype.paintGrid=function(){return this},r.prototype.initEvent=function(){return this},r.prototype.prepare=function(t){this.opt=t;this.opt.scale;return this.width=t.width,this.height=t.height,this.low=0,this.high=0,this.dataLength=0,this.rectMain={x:50,y:Math.floor(.05*this.height),w:Math.floor(this.width-70),h:Math.floor(.8*this.height)},this.initEvent(),this},r.prototype.getXY=function(t,e){var n=(this.opt,Math.min(e.length,this.dataLength)),i=this.high,r=this.low,o=this.rectMain,a=o.w,l=o.h,s=o.x,u=o.y,c=e[t],h=void 0===i||void 0===r?void 0:i-r==0?0:l/(i-r);return c?{x:n<=1?s:Math.round(s+a/(n-1)*t),y:void 0===h?void 0:0===h?Math.round(u+l/2):Math.round(u+l-h*(c.d-r))}:{x:void 0,y:void 0}};var o=function(t){this.prepare({width:t.width-8,height:t.height,xnum:t.xnum||3,ynum:t.ynum||3,hot:t.hot,decimal:0,during:2e3,tagDelay:1e3,scale:1,mainLine:{color:"#000000",width:2},refLine:{color:"#e6e6e6",width:.8},xAxis:{color:"#6A6A6A",baseline:"middle",align:"center"},yAxis:{color:"#797979",baseline:"middle",align:"right"},tagStyle:{show:!0,color:"#1AAD19",baseline:"top",lineHeight:20,borderStyle:"#eeeeee",backgroundStyle:"#ffffff"},ctx:t.ctx})};o.prototype=new r,o.prototype.constructor=o,o.prototype.init=function(){this.formatData(),this.paintGrid(),this.paintTrend()},o.prototype.setSeries=function(t,e){if(!(t.length<=0)){this.seriesData=t;this.dataLength=function(){for(var e=t[0].data.length,n=1;n<t.length;n++)e>t[n].data.length&&(e=t[n].data.length);return e}(),this.height=e||100,this.rectMain={x:50,y:Math.floor(10),w:Math.floor(this.width-70),h:Math.floor(this.height-45)},this.xnum=Math.min(this.opt.xnum,this.dataLength),this.ynum=this.opt.ynum,this.init()}},o.prototype.formatData=function(){var t,e,n,i,r,o,a,l,s=this.seriesData.length,u=this.dataLength,c=this.xnum;this.ynum,Math.floor(u/(c-1));for(t=0;t<s;t++)for(e=0;e<u;e++)(i=this.seriesData[t].data[e])&&"d"in i&&(i.d||"0"===i.d||0===i.d)&&(r=i.d-0,o=void 0===o?r:Math.min(o,r-0),a=void 0===a?r:Math.max(a,r-0));l=Math.ceil((a-o)/2);var h=function(t){var e=t.toString().length;return e>=3?100*Math.ceil(t/100):e>=2?10*Math.ceil(t/10):t};if(0===l)a-0==0?a=10:(n=o.toString().length,n>=7?(this.unit="M",i=Math.ceil(o/1e6),r=Math.ceil(a/1e6),f=h(i+r),a=1e6*f):n>=4?(this.unit="k",i=Math.ceil(o/1e3),r=Math.ceil(a/1e3),f=h(i+r),a=1e3*f):(this.unit="",i=Math.ceil(o/10),r=Math.ceil(a/10),f=h(i+r),a=10*f));else{n=l.toString().length;var f=0;n>=7?(this.unit="M",i=Math.ceil(o/1e6),r=Math.ceil(a/1e6),f=h(i+r),a=1e6*f):n>=4?(this.unit="k",i=Math.ceil(o/1e3),r=Math.ceil(a/1e3),f=h(i+r),a=1e3*f):(this.unit="",i=Math.ceil(o/10),r=Math.ceil(a/10),f=h(i+r),a=10*f)}this.low=0,this.high=a},o.prototype.paintGrid=function(){var t,e,n,i,r=this.opt,o=r.ctx,a=this.seriesData[0].data||[],l=this.high,s=this.low,u=this.xnum,c=this.ynum,h=(r.xAxis,r.yAxis,this.rectMain),f=h.x,d=h.y,y=h.w,p=h.h,g=y/(u-1),v=p/(c-1),_=this.dataLength,w=Math.floor(_/(u-1)),b=Math.floor((l-s)/(c-1));for(o.save(),o.beginPath(),o.setStrokeStyle(r.refLine.color),o.setLineWidth(r.refLine.width),o.setFontSize(10),o.setFillStyle(r.xAxis.color),e=0;e<u;e++)n=Math.floor(g*e),o.moveTo(f+n,d+p),o.lineTo(f+n,d+p+10),a[e*w]&&e!=u-1&&(t=4===a[e*w].t.length?8:12,o.fillText(a[e*w].t,f+n-t,d+p+25)),e==u-1&&(t=4===a[_-1].t.length?8:12,o.fillText(a[_-1].t,f+n-t,d+p+25));for(o.setFillStyle(r.yAxis.color),e=0;e<c;e++)if(i=Math.floor(v*e),o.moveTo(f-5,d+i),o.lineTo(f+y+5,d+i),e==c-1)o.fillText("0",20,d+i);else{var m;m="M"==this.unit?l/1e6-b/1e6*e+this.unit:"k"==this.unit?l/1e3-b/1e3*e+this.unit:l-b*e+this.unit,o.fillText(m,16,d+i)}o.stroke(),o.restore()},o.prototype.paintTrend=function(){var t,e,n,r,o,a=this,l=a.opt,s=a.seriesData.length,u=a.dataLength,c=this.rectMain,h=(c.w,c.h),f=c.x,d=c.y,y=l.ctx,p=l.hot;for(y.save(),t=0;t<s;t++){for(r=[],e=0;e<u;e++)n=a.getXY(e,a.seriesData[t].data),void 0!==n.x&&void 0!==n.y&&r.push(n);for(y.beginPath(),y.setStrokeStyle(a.seriesData[t].color||l.mainLine.color),y.setLineWidth(l.mainLine.width),e=0;e<r.length;e++)0==e?y.moveTo(r[e].x,r[e].y):Math.abs(r[e-1].y-r[e].y)<2?y.lineTo(r[e].x,r[e].y):r[e].y>d+h-10||r[e-1].y>d+h-10?(o=i(r,e-1,.02,.02),y.bezierCurveTo(o.pA.x,o.pA.y,o.pB.x,o.pB.y,r[e].x,r[e].y)):(o=i(r,e-1),y.bezierCurveTo(o.pA.x,o.pA.y,o.pB.x,o.pB.y,r[e].x,r[e].y));if(y.setLineWidth(2),p){var g=y.createLinearGradient(f,d,f,d+h);y.setStrokeStyle("#AD0000"),y.stroke(),g.addColorStop(0,"rgba(216,0,9,0.9)"),g.addColorStop(1,"white"),y.setFillStyle(g),y.lineTo(r[r.length-1].x,d+h),y.lineTo(r[0].x,d+h),y.lineTo(r[0].x,r[0].y),y.fill()}else y.setStrokeStyle("#48C23D"),y.stroke();y.restore()}y.draw()},t.exports={Trend:o}}])});
